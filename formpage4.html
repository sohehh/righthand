<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>신청서 작성 - 보호자 정보 입력</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/master.css">
    <link rel="stylesheet" href="./css/form04.css">
    <script src="./js/jquery-1.11.1.min.js"></script>
    <script>
        $(function(){
            $("#file1").on('change',function(){
                $(this).siblings('.upload-name').val("신분증 촬영 완료");
                $(this).siblings('.upload-name').css('color','#000');
            });

             //모달창 바깥영역클릭시 사라지게
            $(document).on("click",function(e){
                if($(".popup_wrap").is(e.target)){
                    popclose();
                }
            });
        })

    </script>
</head>
<body class="formP4">
    <div class="appBar">
        <ul>
            <li class="prev"></li>
            <li>신청서 작성</li>
            <li class="home"></li>
        </ul>
    </div>
    <div class="step-wizard">
        <ul class="step-wizard-list">
            <li class="step-wizard-item">
                <span class="progress-count">1</span>
                <span class="progress-label"> 신청서<br>선택</span>
            </li>
            <li class="step-wizard-item current-item">
                <span class="progress-count">2</span>
                <span class="progress-label">수급자</span>
            </li>
            <li class="step-wizard-item">
                <span class="progress-count">3</span>
                <span class="progress-label">보호자</span>
            </li>
            <li class="step-wizard-item">
                <span class="progress-count">4</span>
                <span class="progress-label">기타<br>항목</span>
            </li>
        </ul>
    </div>
    <h3 class="title">장기요양급여를 받고자하는<br> 보호자의 기본정보를 입력해주세요</h3>
    <div class="content">
        <div class="user2-input-wrap">
            <form action="">
                <ul class="user2-input-list">
                    <li class="user2-input-cpnt">
                        <h4 class="user2-input-label essential">이름</h4>
                        <div class="user2-input-inner">
                            <label for="name" class="skip">이름</label>
                            <input id="name" type="text" name="이름" size="10" placeholder="이름을 입력해 주세요 (최대 8자)">
                        </div>
                    </li>
                    <li class="user2-input-cpnt">
                        <h4 class="user2-input-label essential">주민등록번호</h4>
                        <div class="user2-input-inner">
                            <label class="skip" for="id-info1">주민등록번호 앞자리</label>
                            <input type="text" size="7" maxlength="6" placeholder="생년월일 6자리" id="id-info1" class="id">
                            <p>-</p>
                            <label class="skip" for="id-info2">주민등록번호 뒷자리</label>
                            <input type="text" size="7" maxlength="7" placeholder="뒤 7자리" id="id-info2" class="id">
                        </div>
                    </li>
                    <li class="user2-input-cpnt">
                        <h4 class="user2-input-label option">관계</h4>
                        <div class="user2-input-inner">
                            <p class="relation-text">관계를 선택해주세요</p>
                        </div>
                    </li>
                    <li class="user2-input-cpnt">
                        <h4 class="user2-input-label essential">전화번호</h4>
                        <div class="user2-input-inner">
                            <label class="skip" for="call-number">전화번호</label>
                            <input type="text" name="call-number" id="call-number" maxlength="11" placeholder="연락처를 '-' 없이 입력해 주세요">
                        </div>
                    </li>
                </ul>
                <h3 class="file-title">파일 첨부</h3>
                <ul class="user2-input-list">
                    <li class="user2-input-cpnt">
                        <h4 class="user2-input-label essential">신분증</h4>
                        <div class="user2-input-inner">
                            <p class="input-file-text">사진 촬영을 해주세요</p>
                            <div class="id-card-popup-btn">
                                촬영하기
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="check-agree-wrap">
                    <div class="check-btn-wrap">
                        <input type="checkbox" class="skip" id="check-agree-btn">
                        <label for="check-agree-btn">동의</label>
                        <p>개인 정보 제공 동의</p>
                    </div>
                    <ul class="agree-exp-list"> 
                        <li>대리 신청의 경우 반드시 등급을 신청하시는 어르신의 정보 제공 동의를 받으셔야 합니다.</li>
                        <li>보호자 또는 수급자가 입력 및 확인하며 보호자 또는 수급자가 직접 오른손의 웹팩스 기능을 활용하여 발송합니다. 오른손은 신청시 입력된 개인 정보를 저장 또는 사용하지 않으며, 웹팩스 발송 후 자동 폐기 됩니다.</li>
                        <li>신청인 회원이 수급자의 개인정보를 입력하는 경우 수급자로부터 명시적으로 위임받았거나 정보의 입력에 대한 정당한 대리권을 보유하고 있어야 하며 이에 따라 본 약관의 동의는 수급자의 개인 정보 이용에 대한 동의를 신청인 회원이 대리 동의하는 것으로 간주합니다.</li>
                        
                        
                    </ul>
                </div>
                <div class="bottom-btn-wrap">
                    <button class="type1-bottom-btn" type="button">
                        다음
                    </button>
                </div> 
            </form>
        </div>
    </div>
    <!-- 다음 버튼 클릭시 보여질 화면 (입력 확인 화면) -->
    <div class="re-check-wrap">
        <div class="appBar">
            <ul>
                <li class="prev"></li>
                <li>입력 정보 확인</li>
                <li class="home"></li>
            </ul>
        </div>
        <h3 class="title">수급자 정보가 제대로 입력되었는지 확인해 주세요</h3>
        <div class="content">
            <div class="re-check-list-wrap">
                <ul class="re-check-list">
                    <li class="re-check-cpnt">
                        <h4 class="user2-input-label">이름</h4>
                        <div class="user2-input-inner">
                            <p class="input-text-name"></p>
                        </div>
                    </li>
                    <li class="re-check-cpnt">
                        <h4 class="user2-input-label">주민등록번호</h4>
                        <div class="user2-input-inner">
                            <p class="input-text-id input-text-id01"></p>
                            <p>-</p>
                            <p class="input-text-id input-text-id02"></p>
                        </div>
                    </li>
                    <li class="re-check-cpnt">
                        <h4 class="user2-input-label">관계</h4>
                        <div class="user2-input-inner">
                            <p class="input-text-relation">미 선택</p>
                        </div>
                    </li>
                    <li class="re-check-cpnt">
                        <h4 class="user2-input-label">전화번호</h4>
                        <div class="user2-input-inner">
                            <p class="input-text-call"></p>
                        </div>
                    </li>
                </ul>
                <h3 class="file-title">파일첨부</h3>
                <ul class="re-check-list">
                    <li class="re-check-cpnt">
                        <h4 class="user2-input-label">신분증</h4>
                        <div class="user2-input-inner">
                            <p class="input-text-idcard"></p>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="re-agree-text-wrap">
                <p class="re-agree-text">개인 정보 제공 동의 완료</p>
                <ul class="agree-exp-list"> 
                    <li>대리 신청의 경우 반드시 등급을 신청하시는 어르신의 정보 제공 동의를 받으셔야 합니다.</li>
                    <li>보호자 또는 수급자가 입력 및 확인하며 보호자 또는 수급자가 직접 오른손의 웹팩스 기능을 활용하여 발송합니다. 오른손은 신청시 입력된 개인 정보를 저장 또는 사용하지 않으며, 웹팩스 발송 후 자동 폐기 됩니다.</li>
                    <li>신청인 회원이 수급자의 개인정보를 입력하는 경우 수급자로부터 명시적으로 위임받았거나 정보의 입력에 대한 정당한 대리권을 보유하고 있어야 하며 이에 따라 본 약관의 동의는 수급자의 개인 정보 이용에 대한 동의를 신청인 회원이 대리 동의하는 것으로 간주합니다.</li>
                </ul>
            </div>
            <div class="bottom-btn-wrap">
                <button class="type2-bottom-btn" type="button">다시 입력
                </button>
                <button class="type2-bottom-btn" type="button">다음
                </button>
            </div> 
        </div>
    </div>
    <div class="popup_wrap">
        <div class="popup_content">
            <div class="header">
                <span>수급자와의 관계 선택</span>
                <span class="close"></span>
            </div>
            <div class="radioWrap">
                <div class="form_radio_btn">
                    <input id="radio-1" type="radio" name="rel" value="자식" checked>
                    <label for="radio-1">자식</label>
                </div>
                <div class="form_radio_btn">
                    <input id="radio-2" type="radio" name="rel" value="부부">
                    <label for="radio-2">부부</label>
                </div>
                <div class="form_radio_btn">
                    <input id="radio-3" type="radio" name="rel" value="손자 / 손녀">
                    <label for="radio-3">손자 / 손녀</label>
                </div>
                <div class="form_radio_btn">
                    <input id="radio-4" type="radio" name="rel" value="기타">
                    <label for="radio-4">기타</label>
                </div>
            </div>
            <button class="rel-btn-bottom">선택하기</button>
        </div>
    </div>
    <!--신분증>촬영하기 눌렀을 때 보여질 화면-->
    <div class="idcard-wrap">
        <div class="appBar">
            <ul>
                <li class="prev"></li>
                <li>신분증 촬영</li>
                <li class="home"></li>
            </ul>
        </div>
        <h3 class="title">주민등록증 또는 운전면허증을 준비해주세요</h3>
        <div class="content">
            <div class="id-background-wrap">
                <img class="id-backgorund" src="./img/id-background.svg" alt="신분증예시이미지">
            </div>
            <div class="id-photo-exp-wrap">
                <ul class="id-photo-exp-list">
                    <li class="id-photo-exp-cpnt">
                        <img src="./img/id-sub-01.svg" alt="가로로 촬영 아이콘">
                        <p>가로로<br> 촬영하세요</p>
                    </li>
                    <li class="id-photo-exp-cpnt">
                        <img src="./img/id-sub-02.svg" alt="어두운 배경 촬영 아이콘">
                        <p>어두운 배경에서 <br>촬영하세요</p>
                    </li>
                    <li class="id-photo-exp-cpnt">
                        <img src="./img/id-sub-03.svg" alt="빛 반사 주의 아이콘">
                        <p>빛 반사에 <br>주의하세요</p>
                    </li>
                </ul>
                <ul class="id-photo-caution-list">
                    <li class="id-photo-caution-cpnt">ㆍ정보 확인이 어렵거나 훼손된 신분증은 거래가 거절 될 수 있습니다</li>
                    <li class="id-photo-caution-cpnt">ㆍ주민등록번호 뒤 5자리를 가려서 올려주세요</li>
                </ul>
            </div>
            <div class="id-upload-btn-wrap">
                <form action="">
                    <input type="file" id="id-file">
                    <label for="id-file">사진 촬영 또는 파일 첨부하기</label>
                </form>
                
            </div>
    
        </div>
    </div>
    <script>
        // 신분증 촬영하기 버튼 클릭시
        $('.id-card-popup-btn').click(function(){
            $('.idcard-wrap').css('display', 'block');
            $('.formP4>.appBar,.formP4>.step-wizard,.formP4>.title, .formP4>.content').css('display','none');
        });

        // 신분증 파일 업로드시 text,css style 변경
        $('#id-file').change(function(){
            $('.idcard-wrap').css('display', 'none');
            $('.formP4>.appBar,.formP4>.step-wizard,.formP4>.title, .formP4>.content').css('display','block');

            $('.id-card-popup-btn').siblings('.input-file-text').css('color','#000').text('신분증 업로드 완료');
        });

        //팝업창 사라지는 코드
        $('.close').on('click', function(){
            popclose();
        });

        //팝업창 나오는 코드
        $('.relation-text').click(function(){
            $('.popup_wrap').fadeIn(200);
            $('.popup_content').animate({
                bottom:0+"%"
            });
            $("body").addClass('notScroll');
        });
    
        

        /*하단 다음 버튼 클릭시 화면 띄우는 코드*/
        $('.btn-bottom').click(function(){
            $('.inputCheckWrap').css('display', 'block');
            $('html').scrollTop(0);
            $('.formP4>.step-wizard,.formP4>.title, .formP4>.content').css('display','none');
            $('body>.appBar').css('display','none');
            // $('.text_idCard').text("신분증 촬영 완료");
        });

        /*하단 다음 버튼 1개 클릭 시*/
        $('.type1-bottom-btn').click(function(){
            if( ($('#name').val().length > 0) && ($('#id-info1').val().length >0) 
            && ($('#id-info2').val().length >0) && ($('#call-number').val().length >0)&&($('#id-file').val().length >0)){
                // alert("모두 입력 완료");
                $('.re-check-wrap').css('display', 'block');
                $('html').scrollTop(0);
                $('.formP4>.appBar,.formP4>.step-wizard,.formP4>.title, .formP4>.content').css('display','none');
            }else{
                btn_popup();
            }
            
        });

        /*팝업 하단 버튼 클릭시 관계 목록에서 선택된 값을 관계인풋에 할당하는 코드*/
        $('.rel-btn-bottom').click(function(){
            var radiovalue = $('input[name=rel]:checked').val();
            $('.relation-text').text(radiovalue);
            $('.input-text-relation').text(radiovalue);
            //인위적으로 val로 할당을 해줬기에 keyup 메소드가 먹히지 않음
            popclose();
        });

        

        /*팝업창 사라지는 코드 | 함수 선언*/
        function popclose(){
            $('.popup_content').animate({
                bottom:-100 + '%'
            },300,function(){
                $('.popup_wrap').fadeOut(200);
            });
            $("body").removeClass('notScroll');
        }

       

        /*인풋 value값 할당하는 코드*/
        $('#name, #id-info1, #id-info2, #call-number, #id-file').change(function(){
            $('.input-text-name').text($('#name').val());
            $('.input-text-id01').text($('#id-info1').val());
            $('.input-text-id02').text($('#id-info2').val());
            $('.input-text-call').text($('#call-number').val());
            $('.input-text-idcard').text('신분증 업로드 완료');
        });

        function btn_popup(){
            alert('필수값을 모두 다 입력 해주세요');
        }

        // /*하단 이전 버튼 클릭 시*/
        $('.type2-bottom-btn:nth-child(1)').click(function(){
            $('.re-check-wrap').css('display', 'none');
            $('.formP4>.appBar,.formP4>.step-wizard,.formP4>.title, .formP4>.content').css('display','block');
        });


        let nameForm = document.getElementById('name');
        let idInfo1Form = document.getElementById('id-info1');
        let idInfo2Form = document.getElementById('id-info2');
        let callForm = document.getElementById('call-number');
        let bottomBtn = document.getElementsByClassName('type1-bottom-btn')[0];
        //클래스 선택자는 뒤에 []붙여줘야 함
        let idcardForm = document.getElementById('id-file');

        nameForm.addEventListener('keyup',activeEvent);
        idInfo1Form.addEventListener('keyup',activeEvent);
        idInfo2Form.addEventListener('keyup',activeEvent);
        callForm.addEventListener('keyup', activeEvent);
        idcardForm.addEventListener('change', activeEvent);

        function activeEvent() {
            if( (nameForm.value.length > 0) && (idInfo1Form.value.length >0) 
            && (idInfo2Form.value.length >0) && (callForm.value.length >0)&&(idcardForm.value.length >0)){
                bottomBtn.style.color='white';
                bottomBtn.style.backgroundColor='#2CB7A4';
            }else{
                bottomBtn.style.backgroundColor='#EFEFEF';
                bottomBtn.style.color='#B7B7B7';
                
            }
        }
    </script>
</body>
</html>