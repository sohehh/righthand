<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
    <script src="./js/jquery-1.11.1.min.js"></script>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
            window.onload = function(){
                document.getElementById("address_kakao1").addEventListener("click", function(){ //주소입력칸을 클릭하면
                    //카카오 지도 발생
                    new daum.Postcode({
                        oncomplete: function(data) { //선택시 입력값 세팅
                            document.getElementById("address_kakao1").value = data.address; // 주소 넣기
                            activeEvent();
                            document.querySelector("input[name=address_detail1]").focus(); //상세입력 포커싱
                        }
                    }).open();
                });

                document.getElementById("address_kakao2").addEventListener("click", function(){ //주소입력칸을 클릭하면
                    //카카오 지도 발생
                    new daum.Postcode({
                        oncomplete: function(data) { //선택시 입력값 세팅
                            document.getElementById("address_kakao2").value = data.address; // 주소 넣기
                            activeEvent();
                            document.querySelector("input[name=address_detail2]").focus(); //상세입력 포커싱
                        }
                    }).open();
                });
            }
    </script>
    <script>
        $("#file1").on('change',function(){
            $(this).siblings('.upload-name').val("신분증 촬영 완료");
            $(this).siblings('.upload-name').css('color','#000');
        });
    </script>
</head>
<body class="formP4">
    
    <div class="step-wizard">
        <ul class="step-wizard-list">
            <li class="step-wizard-item">
                <span class="progress-count">1</span>
                <span class="progress-label"> 신청서<br>선택</span>
            </li>
            <li class="step-wizard-item current-item">
                <span class="progress-count">2</span>
                <span class="progress-label">수급자</span>
            </li>
            <li class="step-wizard-item">
                <span class="progress-count">3</span>
                <span class="progress-label">보호자</span>
            </li>
            <li class="step-wizard-item">
                <span class="progress-count">4</span>
                <span class="progress-label">기타<br>항목</span>
            </li>
        </ul>
    </div>
    <h3 class="title">장기요양급여를 받고자하는<br> 보호자의 기본정보를 입력해주세요</h3>
    <div class="content">
        <form action="">
            <p class="inputWrap">
                이름<br><input type="text" name="이름" size="10" placeholder="이름을 입력해 주세요 (최대 8자)" id="name">
            </p>
            <p class="inputWrap">관계
                <br>
                <input type="text" size="7" maxlength="6" id="relation" placeholder="관계를 선택해 주세요" inputmode="none">
            </p>
            <p class="inputWrap">주민등록지<br>
                <input type="text" id="address_kakao1" name="address" placeholder="주소를 검색하세요" />
                <input type="text" id="address_kakao1Sub" name="address_detail1" placeholder="상세주소를 입력하세요"/>
            </p>
            <p class="inputWrap">실제거주지<br>
                <input type="text" id="address_kakao2" name="address" placeholder="주소를 검색하세요" />
                <input type="text" id="address_kakao2Sub" name="address_detail2" placeholder="상세주소를 입력하세요"/>
            </p>
            <p class="inputWrap">전화번호<br>
                <input type="text" name="전화번호" id="callNumber" maxlength="11" placeholder="연락처를 '-' 없이 입력해 주세요">
            </p>
        
            <div class="fileWrap">
                <h3>파일첨부</h3>
                <div class="fileBox">신분증<br>
                    <input class="upload-name" id="idCard" value="사진 촬영을 해주세요" placeholder="사진 촬영을 해주세요" inputmode="none" onfocus="this.blur()">
                    <label for="file1">촬영하기</label> 
                    <input type="file" id="file1">
                </div>
                <div class="check_wrap">
                    <input type="checkbox" id="check_btn">
                    <label for="check_btn"><span>개인 정보 제공 동의</span></label>
                </div>
                <div class="btn-bottom-wrap">
                    <button class="btn-bottom" disabled="true"  type="button">
                        다음
                    </button>
                </div> 
            </div>
        </form>
    </div>
    <div class="inputCheckWrap">
        <div class="title">보호자 정보가 제대로 입력 되었는지 확인해 주세요</div>
        <div class="content"> 
            <div class="reCheckWrap">
                이름<br>
                <p class="text_name"></p>
            </div>
            <div class="reCheckWrap">
                관계<br>
                <p class="text_rel"></p>
            </div>
            <div class="reCheckWrap">
                주민등록지<br>
                <p class="text_idHome1"></p>
                <p class="text_idHome2"></p>
            </div>
            <div class="reCheckWrap">
                실제거주지<br>
                <p class="text_realHome1"></p>
                <p class="text_realHome2"></p>
            </div>
            <div class="reCheckWrap">
                전화번호<br>
                <p class="text_callNumber"></p>
            </div>
            <div class="fileWrap">
                <h3>파일첨부</h3>
                <div class="reCheckWrap">신분증<br>
                    <p class="text_idCard"></p>
                </div>
            </div>

            <span>개인 정보 제공 동의 완료</span>
            <div class="btn-bottom-wrap2">
                <button disabled="true" class="btn-bottom2">
                    <a href="#">다시 입력</a>
                </button>
                <button  type="button" class="btn-bottom2"  onclick="location.href='./formpage5.html'">다음
                </button>
            </div>
        </div>
    </div>
    <div class="popup_wrap">
        <div class="popup_content">
            <div class="header">
                <span>수급자와의 관계 선택</span>
                <span class="close"></span>
            </div>
            <div class="radioWrap">
                <div class="form_radio_btn">
                    <input id="radio-1" type="radio" name="rel" value="자식" checked>
                    <label for="radio-1">자식</label>
                </div>
                <div class="form_radio_btn">
                    <input id="radio-2" type="radio" name="rel" value="부부">
                    <label for="radio-2">부부</label>
                </div>
                <div class="form_radio_btn">
                    <input id="radio-3" type="radio" name="rel" value="손자 / 손녀">
                    <label for="radio-3">손자 / 손녀</label>
                </div>
                <div class="form_radio_btn">
                    <input id="radio-4" type="radio" name="rel" value="기타">
                    <label for="radio-4">기타</label>
                </div>
            </div>
            <button class="pu-btn-bottom">
                <a href="#">선택하기</a>
            </button>
        </div>
    </div>
    <script>
        //팝업창 사라지는 코드
        $('.close').on('click', function(){
            popclose();
        });

        //팝업창 나오는 코드
        $('#relation').click(function(){
            $('.popup_wrap').fadeIn(200);
            $('.popup_content').animate({
                bottom:0+"%"
            });
            $("body").addClass('notScroll');
        });
    
        

        /*하단 다음 버튼 클릭시 화면 띄우는 코드*/
        $('.btn-bottom').click(function(){
            $('.inputCheckWrap').css('display', 'block');
            $('html').scrollTop(0);
            $('.formP4>.step-wizard,.formP4>.title, .formP4>.content').css('display','none');
            // $('.text_idCard').text("신분증 촬영 완료");
        });


        /*팝업 하단 버튼 클릭시 관계 목록에서 선택된 값을 관계인풋에 할당하는 코드*/
        $('.pu-btn-bottom').click(function(){
            var radiovalue = $('input[name=rel]:checked').val();
            $('#relation').val(radiovalue);
            $('.text_rel').text($('#relation').val());
            //인위적으로 val로 할당을 해줬기에 keyup 메소드가 먹히지 않음

            relForm= true;
            activeEvent();
            popclose();
        });

        

        /*팝업창 사라지는 코드 | 함수 선언*/
        function popclose(){
            $('.popup_content').animate({
                bottom:-100 + '%'
            },300,function(){
                $('.popup_wrap').fadeOut(200);
            });
            $("body").removeClass('notScroll');
        }

        /*인풋 value값 할당하는 코드*/
        $(function(){
            $('#name, #relation ,#address_kakao1, #address_kakao1Sub,#address_kakao2, #address_kakao2Sub, #callNumber').keyup(function(){
                $('.text_name').text($('#name').val());
                $('.text_rel').text($('#relation').val());
                $('.text_idHome1').text($('#address_kakao1').val());
                $('.text_idHome2').text($('#address_kakao1Sub').val());
                $('.text_realHome1').text($('#address_kakao2').val());
                $('.text_realHome2').text($('#address_kakao2Sub').val());
                $('.text_callNumber').text($('#callNumber').val());
            });
        });

        /*하단 이전 버튼 클릭 시*/
        $('.btn-bottom-wrap2 .btn-bottom2:nth-child(1) a').click(function(){
            $('.inputCheckWrap').css('display', 'none');
            $('.formP4>.step-wizard,.formP4>.title, .formP4>.content').css('display','block');
        });

        let nameForm = document.getElementById('name');
        let relForm;
        let adrForm = document.getElementById('address_kakao1');
        let adrSubForm = document.getElementById('address_kakao1Sub');
        let adr2Form = document.getElementById('address_kakao2');
        let adr2SubForm = document.getElementById('address_kakao2Sub');
        let callForm = document.getElementById('callNumber');
        var btnButton = document.getElementsByClassName('btn-bottom')[0];
        //클래스 선택자는 뒤에 []붙여줘야 함

        nameForm.addEventListener('keyup',activeEvent);
        adrSubForm.addEventListener('keyup', activeEvent);
        adr2SubForm.addEventListener('keyup', activeEvent);
        callForm.addEventListener('keyup', activeEvent);

        function disabledBtn() {
            btnButton.disabled = true;
            console.log("No"); 
            btnButton.style.color='#B7B7B7';
            btnButton.style.backgroundColor='#EFEFEF';
        }

        function activeEvent() {
                switch(!((nameForm.value && relForm) && (adrForm.value && adrSubForm.value))){
                    case true : //입력값이 없을 때
                        disabledBtn();
                        break;
                    
                    case false : //모두 입력값이 있을 때
                        switch(!((adr2Form.value && adr2SubForm.value)&& callForm.value)){
                            case true : // 입력값이 없을 때
                                disabledBtn();
                            break;
                            case false : //모두 입력값이 있을 때
                                btnButton.disabled = false;
                                btnButton.removeAttribute( 'disabled' );
                                console.log("Yes");
                                btnButton.style.color='white';
                                btnButton.style.backgroundColor='#2CB7A4';
                            break;
                        }
                }
        }

        

    </script>
</body>
</html>